<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="cr_styles.css">
<style>
h3 { 
    display: block;
    font-size: 1.17em;
    margin-top: 1em;
    margin-bottom: 1em;
    margin-left: 0;
    margin-right: 0;
    font-weight: italic;
}
</style>
  <link rel="icon" type="image/vnd.microsoft.icon"
     href="cr_icon.ico" />
<title>Connor Reed - Projects</title>
</head>

<body>
<div id="column">
<img src="i/gen_header.jpg"/>

<div id="nav">
<ul id="navlist">
  <li id="home"><a href="index.html"></a></li>
  <li id="proj"><a href="cr_proj.html"></a></li>
  <li id="resume"><a href="Connor_Reed_Resume.pdf"></a></li>  <!-- Resume is hard linked to /Users/connordog/Dropbox/Desktop_Files/Work_Things/_Resumes/Connor_Reed_Resume/Connor_Reed_Resume.pdf -->
  <li id="int"><a href="cr_int.html"></a></li>
</ul>
</div>
<div id="innards">

<h2> <a target="blank" href="https://github.com/Connor-R/NSBL/"> Simulation Baseball Analytics </a> </h2>
<p> 
  I have participiated in <a target="_blank" href="http://diamond-mind.com/">Diamond Mind Baseball (DMB)</a> simulation leagues since I was 16. The general idea of a simulation league is to use statistical projections for players to simulate, using the DMB software, a complete 162 game season running parallel to the real life MLB season. The <a target="_blank" href="http://thensbl.com/">league</a> I participate in has used the <a target="blank" href="http://www.fangraphs.com/blogs/category/2017-zips-projections/">ZiPS projection system</a> provided by Dan Szymborski.
</p>
<p>
  While this remains one of my favorite recreational pastimes, in the past couple of years I have shifted towards an extremely data driven approach to run my particular team. This has involved re-shaping my thinking process and decision making approach to be more objective and less subjective than when I started in 2008. For example, I reverse-engineered certain parts of projection system our league is based on and now have more detailed player projections for every player in the league which helps lessen personal biases in decision making processes regarding player transactions or roster movement. Additionally, I created an automated tracking system for the top available minor league and amateur players available in the league that helps me track player performance and trends for the best draft eligible players.
</p>
<p>
  The following paragraph further details my data oriented process. First, I have done research on how players perform relative to their projections, resulting in the ability to generate a Gaussian distribution curve for each player projection within the simulation. From these projections, I use an implementation of the <a target="blank" href="https://en.wikipedia.org/wiki/Hungarian_algorithm">Hungarian algorithm</a> to create optimized <a target="blank" href="https://github.com/Connor-R/NSBL/blob/master/team_strength/pitching_optimizer.py">pitching rotations</a> and optimized <a target="blank" href="https://github.com/Connor-R/NSBL/blob/master/team_strength/lineup_optimizer.py">batting lineups</a> against left- and right-hand opposing pitchers. Next, by treating every player as a independent random variable, I can <a target="blank" href="https://en.wikipedia.org/wiki/Sum_of_normally_distributed_random_variables">create</a> a team-level distribution which leads to a <a target="blank" href="https://github.com/Connor-R/NSBL/blob/master/team_strength/team_strength.py">projection</a> of each team's win-loss record and the amount of expected variance given their optimal roster construction. Finally, using these projections and <a target="blank" href="https://www.printyourbrackets.com/how-do-the-mlb-playoffs-work.html">MLB's playoff structure</a> I can compute the probability of each team's advancement to various playoff rounds by using the <a target="blank" href="https://en.wikipedia.org/wiki/Log5">Log5 odds ratio</a> to predict the likelihood of a team winning a single game, and the <a target="blank" href="https://en.wikipedia.org/wiki/Binomial_distribution#Probability_mass_function">binomial probability mass function</a> to predict the likelihood of winning a 5 or 7 game series as appropriate.
</p>

<center>
<figure style="float:none">
   <img src="i/nsbl1.png" alt="NSBL Standings" style="width:800px;">
   <figcaption> 
    2017 NSBL Projected Standings and Playoff Odds
   </figcaption>
</figure>
</center>

<p>
  The full codebase for this research and analysis is available <a target="blank" href="https://github.com/connor-r/NSBL">on my github</a>. This code has scripts capable of building a MySQL database, populating the tables by scraping the league and additional sites, post-processessing the data into a myriad of advanced metrics, computing historical statistics, analyzing prospects for an amateur draft, optimizing team rosters, and predicting team-level outcomes. If you're interested in just seeing the results and not the process, a full (relatively up-to-date) backup of the database (both SQL and .csv format) can be found <a target="blank" href="http://bit.ly/NSBL_db_backups">on Dropbox</a>.
</p>
<p>
  I also maintain the advanced leaderboards for the league, and have linked to each table below:
  <ul>
    <li> <a href="Tables/bookmarked.html">Advanced Standings</a>
    <li> <a href="Tables/leaderboard_Changes.html">Weekly Changes</a>
    <li> <a href="Tables/leaderboard_fWAR.html">Pitcher WAR (by FIP)</a>
    <li> <a href="Tables/leaderboard_rWAR.html">Pitcher WAR (by ERA)</a>
    <li> <a href="Tables/leaderboard_Batters.html">Batter WAR (without any DMB defensive metrics)</a>
  </ul>
</p>
<br>



<h2> <a target="blank" href="https://github.com/Connor-R/mlb_prospects"> Prospect Analysis </a> </h2>
<p> 
  I love amatuer/minor league sports. While I try and stay somewhat knowledge about the top NHL and NHL draft prospects (mostly by reading <a target="blank" href="https://twitter.com/coreypronman">Corey Pronman</a>), I follow minor league baseball, the MLB draft, and the NBA draft much more closely. I've attached links to my draft rankings for the 2016, 2017, and 2018 NBA Drafts:
  <ul>
    <li> <a href="2018_nba_draft_board.html">2018 NBA Draft Ranking (with notes!) </a>
    <li> <a href="2018_nba_draft_board.html#2017">2017 NBA Draft Ranking</a>
    <li> <a href="2018_nba_draft_board.html#2016">2016 NBA Draft Ranking</a>
  </ul>
<p>
  The below link contains a joined table from my prospect database, which contains data on MLB prospects from 2013 to present. I've done my best to join prospects together from my 3 datasources (mlb.com, fangraphs.com, and minorleagueball.com) by matching based on name, birthdate, age, and occasionally team. That said, I'm sure a number of players slipped through the cracks. If you find one, let me know! Since there are many columns, I've added pseudo line breaks between columns that are specific to each site. The column name "*fg*" indicates that the following columns are all from fangraphs.com (and similarly with "*mlb*" for mlb.com, and "*mi*" for minorleagueball.com). A column prefix ending in "d" (e.g. "fgd_rank") indicates a draft related column, while column prefix ending in "p" (e.g. "mlbp_top100") indicates a prospect related column.
</p>
  <ul>
    <li> <a href="Tables/master_prospects.html">MLB prospect dataset</a>
  </ul>
</p>
<p>
  The code for my MLB prospect database is all posted <a target="blank" href="https://github.com/Connor-R/mlb_prospects">on my github</a>. 
</p>
<br>
<br>



<figure style="float:right">
   <img src="i/curry_shots.png" alt="Stephen Curry Shot Chart" style="height:400px;">
   <figcaption> 
     <!-- Stephen Curry's 2015/16 Shot Chart -->
   </figcaption>
</figure>

<h2> <a target="blank" href="https://github.com/Connor-R/nba_shot_charts/"> NBA Shot Charts </a> </h2>
<p> 
  In January 2017, I tried my hand at making NBA shot charts. These charts are primarily an extension from the work of <a target="blank" href="http://www.danvatterott.com/">Dan Vatterott</a> and <a target="blank" href="http://www.savvastjortjoglou.com">Savvas Tjortjoglou</a>. I made an attempt to combine my favorite aspects of other shot charts on the internet (primarily from: <a target="blank" href="https://www.instagram.com/kirkgoldsberry/">Kirk</a> <a target="blank" href="https://fivethirtyeight.com/contributors/kirk-goldsberry/">Goldsberry</a>, <a target="blank" href="http://buckets.peterbeshai.com/app/#/playerView/201935_2015">Buckets (by Peter Beshai)</a>, <a target="blank" href="http://toddwschneider.com/posts/ballr-interactive-nba-shot-charts-with-r-and-shiny/">BallR (by Todd Schneider)</a>, and <a target="blank" href="http://www.austinclemens.com/shotcharts/">Swish (by Austin Clemens)</a>) into one image, while also adding some additional features I thought would be nice in order to better distinguish the amount of value added by a player.
</p>
<p>
   For those interested in re-creating these charts, creating their own, or learning more about the features of these charts, the full codebase is available <a target="blank" href="https://github.com/connor-r/nba_shot_charts">on my github</a>.
</p>
<p>
   For those interested in looking at the charts I've already made, a description of the various metrics and how I use the charts can be found <a target="blank" href="http://i.imgur.com/FXGyBQ8.png">here</a>, feel free to follow my twitter bot (<a target="blank" href="https://twitter.com/NBAChartBot">@NBAChartBot</a>) that posts a pseudo-random shot chart on a regularly scheduled basis, or click here for a full directory of <a target="blank" href="https://www.dropbox.com/sh/jcwgnse5x5vq3bp/AAAxFABO5KEt4CpnCx74Vi6ya?dl=0">player</a> or <a target="blank" href="https://www.dropbox.com/sh/vkntpdakgomf6m1/AAARQV6avOaluhEYQP_SfOpMa?dl=0">team</a> charts. Finally, the code for this bot is <a target="blank" href="https://github.com/Connor-R/nba_shot_charts/blob/master/chart_bot.py">also on my github</a>.
</p>
<p>
  The chart to the right is from Stephen Curry's historic 2015/16 season, in which he became the NBA's first unanimous MVP. He sank 402 3 point shots (obliterating the NBA record), added 406 points over an average NBA offense (highest on record), and posted an EFG+ of 125 (highest on record for player with > 800 shots in season).
</p>
<br>

<br>
<h2> <a target="blank" href="https://github.com/Connor-R/Craigslist/"> Apartment Hunting on Craigslist </a> </h2>
<p>
  Using the <a target="blank" href="https://github.com/juliomalegria/python-craigslist">craigslist-python package</a>, I scrape and categorize local apartment listings that fit my budget and e-mail myself new results every 2 hours. In addition to generating a dataset for future analysis on the topic of apartments in my region, this set of scripts eliminates the need to constantly check craigslist manually and scroll through the results for new postings. I'm hopeful that this project will help me navigate the tough task of not drastically overpaying for housing in the brutal Northern California region. My code for this project is available <a target="blank" href="https://github.com/Connor-R/Craigslist">on my github</a>.
</p>
<br>

<figure style="float:right">
   <img src="i/xgoals1.png" alt="xGoals Table" style="height:300px;">
   <figcaption> <br>
     xGoals vs. possession based metrics
   </figcaption>
</figure>



<h2> NHL Shot Quality </h2>
<p> 
  My friend <a target="_blank" href="https://www.linkedin.com/in/james-mccorriston-624360b4">Jamie McCorriston</a> and I have developed a set of distance based shot quality metrics for the National Hockey League. By regressing shooting percentages from various distances at various game states, we created a set of expected goal models at both a team and individual player level. The full dataset can be seen at our site <a target="_blank" href="http://fourthlineheroes.com/">Fourth Line Heroes</a> with more detailed explanations available <a target="_blank" href="http://fourthlineheroes.com/#explanation">here</a> and <a target="_blank" href="xgoals-terms.pdf">here</a>. Our flagship metric, the xGoal, has been shown to be a better indicator of team success on an individual game level than commonly referenced metrics shots on goal and shot attempts, suggesting that expected goals are less influenced by score effects than shot volume based metrics.
</p>
<br>
<br>



<h2> NHL Daily Fantasy Sports </h2>
<p> 
  The aforementioned Jamie McCorriston and I created a model for playing NHL DFS. While it has not been very profitable to this point, there are some components of the model that have been successful. For one, our process has been sound, through running multiple models as well as comparing to two basic control models to ensure that we are indeed creating value rather than essentially blindly selecting players.
</p>
<p>
  Secondly, our goalie projection system has performed quite well. Without giving away the details, I will try to outline the general idea of how we project goalie performance. First, we use a prediction for how many shots the opposing team will have against a neutral opponent, and how many shots the goalie's team will allow. We create a weighted average of these two values to create an estimation of the total shots on goal the goalie will face in the game. We perform a similar step to estimate the goalie's save percentage and then multiply this value by the expected shots on goal to find the number of expected goals and we expect the goalie to allow and the number of expected saves we expect him to make. The biggest factor in projecting DFS goalie performance is Wins. For this, we use a combination of Vegas lines as well as metrics we created under our xGoals model. Finally, we add a probability of a Shutout, by raising the expected save percentage to the power of expected shots (e.g. a goalie with an expected Sv% of .910 and with 30 shots on goal against, would be expected to record a shutout .910^30 = 5.9% of games). While the overall framework is pretty basic, the projections have performed relatively strongly thus far, recording roughly 90% of its expected value over our limited test sample to this point.
</p>
<br>
<br>



<h2> NBA Public Models vs. Vegas Lines </h2>
<p> 
  Over the course of the 2015-16 NBA season, I began tracking a variety of public models and tracked their process against Vegas opening and closing lines. While there were no real dollars invested, each individual model as well as a weighted ensemble of all models managed to profit over the full season while betting at a proportion of the <a target="_blank" href="https://en.wikipedia.org/wiki/Kelly_criterion">Kelly Criterion</a> (although some models did not have projections for all 1230 games). While this is not a guarantee of potential profit in the future, it would suggest that Vegas lines are not as unbeatable as they once thought to be (or at least as unbeatable as I thought they were). However, this does not necessarily mean there is free money to be had. Most models did not take into account injuries, often overrating heavily depleated rosters (think late season <a target="blank" href="http://www.nba.com/celtics/news/sidebar/shoot-visitor-030916-Grizzlies-Bearing-Down-Despite-Myriad-Injuries">Memphis Grizzlies</a>). Additionally, there were a number of <a target="blank" href="http://espn.go.com/nba/recap?gameId=400828818">substantial</a> <a target="blank" href="http://espn.go.com/nba/recap?gameId=400829050">upsets</a> in the NBA in which the models generally bet on the underdog, greatly increasing their profit margins in highly volatile events. So although the models all had positive ROI in 2015-16, there is reason to believe it may not be sustainable if the NBA has a calmer season in 2016-2017 and beyond. Regardless, I will continue to track and follow this project, monitoring the strength of various public models betting against Las Vegas sportsbooks.
</p>




</div>
</div>
</body>
</html>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-77536074-1', 'auto');
  ga('send', 'pageview');

</script>

